# Презентация по лабораторной работе №11

----

# Тема:
## Программирование в командном процессоре ОС UNIX. Командные файлы

----

## Российский Университет Дружбы Народов

### Факультет Физико-Математических и Естественных Наук

*Дисциплина: Операционные системы*

Студент: Довлетмурат Байрамгельдыев

Группа: НФИбд-03-20

Москва, 2021г.

----

### Цель работы

Изучить основы программирования в оболочке ОС UNIX/Linux, научиться писать небольшие командные файлы. 

----

### Введение

Для того чтобы текстовый файл можно было использовать как командный, существует несколько возможностей.

Пусть с помощью редактора создан файл с именем f1, содержащий одну строку следующего вида: date; pwd; ls. Можно вызвать оболочку shell как команду, обозначаемую sh, и передать ей файл fl, как аргумент или как перенаправленный вход: $ sh fl или $ sh < fl. В результате выполнения любой из этих команд будет выдана дата, затем имя текущего каталога, а потом содержимое каталога.

Файл можно выполнить и в текущем экземпляре shell. Для этого существует специфическая команда . (точка): .fl.

Более удобный вариант работы с командным файлом - это превращение его в выполняемый файл, т.е. просто сделать его командой (запускающей этот файл по его названию), что достигается изменением кода защиты. Для этого надо разрешить выполнение этого файла. Например, chmod 711 fl сделает у этого файла код защиты «rwx--x--x». Тогда простой вызов fl приведет к выполнению тех же трех команд, которые были записаны в файл.

Результат будет тот же, если файл с содержимым date; pwd; ls будет представлен в виде:

date

pwd

ls

так как переход на другую строку также является разделителем в последовательности команд.

Начинать командный файл надо всегда с пустой строки или пустого оператора «:». Их выполнение происходит в режиме интерпретации с помощью shell-интерпретатора.

Работу всех команд операционной системы упрощенно можно представить следующим образом: команда - это некоторое устройство, которое выполняет преобразование входного потока в выходной.

----

### Последовательность выполнения работы:
1. Написать скрипт, который при запуске будет делать резервную копию самого себя (то есть файла, в котором содержится его исходный код) в другую директорию backup в вашем домашнем каталоге. При этом файл должен архивироваться одним из архиваторов на выбор zip, bzip2 или tar. Способ использования команд архивации необходимо узнать, изучив справку. 
2. Написать пример командного файла, обрабатывающего любое произвольное число аргументов командной строки, в том числе превышающее десять. Например, скрипт может последовательно распечатывать значения всех переданных аргументов. 
3. Написать командный файл — аналог команды ls (без использования самой этой команды и команды dir). Требуется, чтобы он выдавал информацию о нужном каталоге и выводил информацию о возможностях доступа к файлам этого каталога.
   
### Ход работы.

1. Изучил опции команды, и саму команду gzip, с помощью команды man.

![LABA11-1.png](https://ic.wampi.ru/2021/05/28/LABA11-1.png)

• Создал текстовой файл lab11.sh, используя команду touch. Открываю текстовой редактор emacs.

![LABA11-2.png](https://ic.wampi.ru/2021/05/28/LABA11-2.png)

• Написал код, в котором я создаю папку backup, копировал текстовой файл lab11.sh, указав путь для сохранения файла. После архивировал данный файл через команду gzip.

![LABA11-3.png](https://ic.wampi.ru/2021/05/28/LABA11-3.png)

• Командой chomad я сделал так, чтобы файл был исполняемым в Linux. Следующая строка для того, чтобы он выполнил нашу ранее написанную программу.

![LABA11-4.png](https://ic.wampi.ru/2021/05/28/LABA11-4.png)

• Проверяю, смог ли выполнить мою программу. Папка с именем backup была создана. Видим, папка с именем backup.sh был архивирован, теперь называется backup.sh.gz.

![LABA11-5.png](https://ic.wampi.ru/2021/05/28/LABA11-5.png)

• Проверяю, смог ли выполнить мою программу.

![LABA11-6.png](https://ic.wampi.ru/2021/05/28/LABA11-6.png)

• Проверяю, смог ли выполнить мою программу. Внутри папки backup.sh.gz находиться наш скопированный файл lab11.sh, который был переименован в backup.sh.

![LABA11-7.png](https://ic.wampi.ru/2021/05/28/LABA11-7.png)

2. Создал текстовой файл lab11_2.sh(для выполнения 2 пункта данной лабораторной работы), используя команду touch. Открываю текстовой редактор emacs.
• Написал программу, для вывода того, что я буду вводить. Для начало надо ввести числа, я решил ввести нечетные числа, как видим, выводит так же нечетные, при это те же самые, которые были введены.

![LABA11-8.png](https://ic.wampi.ru/2021/05/28/LABA11-8.png)

• Командой chmad я сделал так, чтобы файл был исполняемым в Linux. Следующая строка для того, чтобы он выполнил нашу ранее написанную программу.

![LABA11-9.png](https://ic.wampi.ru/2021/05/28/LABA11-9.png)

3. Создал текстовой файл lab11_3.sh(для выполнения 2 пункта данной лабораторной работы), используя команду touch. Открываю текстовой редактор emacs.
• Написал командный файл — аналог команды ls (без использования самой этой команды и команды dir).

![LABA11-1034ded7f82d9bfec6.png](https://ic.wampi.ru/2021/05/28/LABA11-1034ded7f82d9bfec6.png)

• Он выдавал информацию о нужном каталоге и выводил информацию о возможностях доступа к файлам этого каталога.

![LABA11-12.png](https://ic.wampi.ru/2021/05/28/LABA11-12.png)

4. Создал текстовой файл lab11_4.sh(для выполнения 2 пункта данной лабораторной работы), используя команду touch. Открываю текстовой редактор emacs.
• Написал командный файл, который получает в качестве аргумента командной строки формат файла (.txt, .doc, .jpg, pdf и т.д.).

![LABA11-13.png](https://ic.wampi.ru/2021/05/28/LABA11-13.png)

• Вычисляет количество таких файлов в указанной директории. Путь к директории также передаётся в виде аргумента командной строки.

![LABA11-14.png](https://ic.wampi.ru/2021/05/28/LABA11-14.png)

### Вывод:
С помощью данной лабораторной работы я познакомился с основами программирования в оболочке ОС UNIX/Linux, научился писать небольшие командные файлы.  

